// https://github.com/Yuheng0101/X/blob/main/Scripts/tidal.js

/**!
 * url-search-params-polyfill
 *
 * @author Jerry Bendy (https://github.com/jerrybendy)
 * @licence MIT
 */
!function(t){"use strict";var n,r,e=function(){try{if(t.URLSearchParams&&"bar"===new t.URLSearchParams("foo=bar").get("foo"))return t.URLSearchParams}catch(n){}return null}(),i=e&&"a=1"===new e({a:1}).toString(),o=e&&"+"===new e("s=%2B").get("s"),a=e&&"size"in e.prototype,s="__URLSearchParams__",u=!e||((n=new e).append("s"," &"),"s=+%26"===n.toString()),c=p.prototype,f=!!(t.Symbol&&t.Symbol.iterator);if(!e||!i||!o||!u||!a){c.append=function(t,n){$(this[s],t,n)},c.delete=function(t){delete this[s][t]},c.get=function(t){var n=this[s];return this.has(t)?n[t][0]:null},c.getAll=function(t){var n=this[s];return this.has(t)?n[t].slice(0):[]},c.has=function(t){return m(this[s],t)},c.set=function t(n,r){this[s][n]=[""+r]},c.toString=function(){var t,n,r,e,i=this[s],o=[];for(n in i)for(t=0,r=g(n),e=i[n];t<e.length;t++)o.push(r+"="+g(e[t]));return o.join("&")};var h=t.Proxy&&e&&(!o||!u||!i||!a);h?(r=new Proxy(e,{construct:function(t,n){return new t(new p(n[0]).toString())}})).toString=Function.prototype.toString.bind(p):r=p,Object.defineProperty(t,"URLSearchParams",{value:r});var l=t.URLSearchParams.prototype;l.polyfill=!0,!h&&t.Symbol&&(l[t.Symbol.toStringTag]="URLSearchParams"),"forEach"in l||(l.forEach=function(t,n){var r=v(this.toString());Object.getOwnPropertyNames(r).forEach(function(e){r[e].forEach(function(r){t.call(n,r,e,this)},this)},this)}),"sort"in l||(l.sort=function(){var t,n,r,e=v(this.toString()),i=[];for(t in e)i.push(t);for(i.sort(),n=0;n<i.length;n++)this.delete(i[n]);for(n=0;n<i.length;n++){var o=i[n],a=e[o];for(r=0;r<a.length;r++)this.append(o,a[r])}}),"keys"in l||(l.keys=function(){var t=[];return this.forEach(function(n,r){t.push(r)}),S(t)}),"values"in l||(l.values=function(){var t=[];return this.forEach(function(n){t.push(n)}),S(t)}),"entries"in l||(l.entries=function(){var t=[];return this.forEach(function(n,r){t.push([r,n])}),S(t)}),f&&(l[t.Symbol.iterator]=l[t.Symbol.iterator]||l.entries),"size"in l||Object.defineProperty(l,"size",{get:function(){var t=v(this.toString());if(l===this)throw TypeError("Illegal invocation at URLSearchParams.invokeGetter");return Object.keys(t).reduce(function(n,r){return n+t[r].length},0)}})}function p(t){((t=t||"")instanceof URLSearchParams||t instanceof p)&&(t=t.toString()),this[s]=v(t)}function g(t){var n={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'\(\)~]|%20|%00/g,function(t){return n[t]})}function y(t){return t.replace(/[ +]/g,"%20").replace(/(%[a-f0-9]{2})+/ig,function(t){return decodeURIComponent(t)})}function S(n){var r={next:function(){var t=n.shift();return{done:void 0===t,value:t}}};return f&&(r[t.Symbol.iterator]=function(){return r}),r}function v(t){var n={};if("object"==typeof t){if(d(t))for(var r=0;r<t.length;r++){var e=t[r];if(d(e)&&2===e.length)$(n,e[0],e[1]);else throw TypeError("Failed to construct 'URLSearchParams': Sequence initializer must only contain pair elements")}else for(var i in t)t.hasOwnProperty(i)&&$(n,i,t[i])}else{0===t.indexOf("?")&&(t=t.slice(1));for(var o=t.split("&"),a=0;a<o.length;a++){var s=o[a],u=s.indexOf("=");-1<u?$(n,y(s.slice(0,u)),y(s.slice(u+1))):s&&$(n,y(s),"")}}return n}function $(t,n,r){var e="string"==typeof r?r:null!=r&&"function"==typeof r.toString?r.toString():JSON.stringify(r);m(t,n)?t[n].push(e):t[n]=[e]}function d(t){return!!t&&"[object Array]"===Object.prototype.toString.call(t)}function m(t,n){return Object.prototype.hasOwnProperty.call(t,n)}}("undefined"!=typeof global?global:"undefined"!=typeof window?window:this);

console.log('hello1');
console.log(JSON.stringify($request));
console.log('hello2');
console.log($request.url);
console.log('hello3');
console.log(new URLSearchParams($request.url).get('audioquality'));
console.log('End');
